# Tongji 电费自动查询的 Python 脚本


实在搞不懂学校为什么不能做一个电费提醒的功能，每次断电都断的猝不及防，只能自力更生

于是就诞生了这个脚本

这个脚本能够实现(对我的宿舍)电费的查询，并且在电费低于10块钱的时候，发邮件通知该充钱了。


## 配置环境

- Ubuntu 16.04
- python 3.5
- 第三方包 requests, lxml

注：lmxl 包在用 `pip` 安装的时候需要编译，对某些小设备比如Raspberry来说可能不太友好（时间可能需要半个小时以上）可以用软件包的形式来安装

```bash
sudo apt-get install python3-lxml
```

## 使用说明

使用 **crontab** 功能定期(比如每天上午8点)执行一次脚本

在 **Terminal** 中键入 `crontab -e`，然后在文件的最后加入

```bash
0 15 * * *  .../TEB.sh
```

## 问题

学校能源中心的网站 [http://202.120.163.129:88/](http://202.120.163.129:88/) 只能在校内的ip段访问，我还没有想到怎么在云服务器上挂这个脚本。

~~也许我应该常年在宿舍挂一个树莓派~~

## 更新记录

v1.1.1  _2017-05-14_

1. 修复多人接收收件人显示不正确的问题
2. 添加 `.sh` 文件来执行计划任务，防止因环境变量问题造成执行失败

v1.1.0  _2017-05-14_

1. 修改了json文件的结构
2. 允许添加多个房间，每个房间可以有多个接收通知的人
3. 修改了邮件的标题，便于设置分类和免打扰

v1.0.0  _2017-05-13_

1. 实现对固定宿舍的电费查询
2. 实现电费低时邮件提醒

